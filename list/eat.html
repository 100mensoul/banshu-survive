<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åü„Åπ„Çã„Åü„ÇÅ„Å´„ÄÅÁîü„Åç„Å¶„ÅÑ„Çã - Âß´Ë∑Ø„Ç∞„É´„É°„Éù„Éº„Çø„É´</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #faf8f6 0%, #f0ede8 100%);
            min-height: 100vh;
            color: #3a3a3a;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            padding: 60px 40px;
            border-radius: 24px;
            text-align: center;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(218, 165, 32, 0.1) 0%, transparent 70%);
            animation: shimmer 6s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.3; transform: rotate(0deg); }
            50% { opacity: 0.6; transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 4rem;
            color: #2c2c2c;
            margin-bottom: 24px;
            font-weight: 300;
            letter-spacing: 0.08em;
            position: relative;
            z-index: 2;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header .subtitle {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.3rem;
            color: #8B4513;
            margin-bottom: 40px;
            font-weight: 400;
            position: relative;
            z-index: 2;
            line-height: 1.8;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .controls {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 500;
            margin-bottom: 12px;
            color: #8B4513;
            font-size: 0.95rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 16px 20px;
            border: 2px solid #e6ddd4;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafaf8;
            color: #3a3a3a;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #DAA520;
            box-shadow: 0 0 0 4px rgba(218, 165, 32, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            box-shadow: 0 4px 16px rgba(218, 165, 32, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #B8860B, #DAA520);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(218, 165, 32, 0.4);
        }

        .btn-secondary {
            background: #f5f1eb;
            color: #8B4513;
            border: 2px solid #e6ddd4;
        }

        .btn-secondary:hover {
            background: #e6ddd4;
            transform: translateY(-2px);
        }

        .view-toggle {
            display: flex;
            background: #f5f1eb;
            border-radius: 12px;
            padding: 4px;
            gap: 4px;
        }

        .view-toggle button {
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            color: #8B4513;
            font-weight: 400;
        }

        .view-toggle button.active {
            background: #DAA520;
            color: white;
            box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
        }

        .stats {
            background: rgba(255, 255, 255, 0.9);
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 32px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fafaf8, #f5f1eb);
            border-radius: 16px;
            border: 1px solid rgba(218, 165, 32, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 300;
            color: #DAA520;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #8B4513;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 32px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.9);
            overflow: hidden;
        }

        .card.closed {
            opacity: 0.6;
            background: rgba(100, 100, 100, 0.1);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 60px rgba(58, 58, 58, 0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 500;
            color: #8B4513;
            margin-bottom: 8px;
            letter-spacing: 0.01em;
        }

        .card-address {
            color: #666;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .card-type {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
        }

        .card-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 28px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: 400;
        }

        .info-value {
            font-weight: 500;
            color: #3a3a3a;
            font-size: 0.95rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .tag {
            background: rgba(218, 165, 32, 0.1);
            color: #8B4513;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 400;
        }

        .card-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e6ddd4;
        }

        .btn-small {
            padding: 12px 24px;
            font-size: 0.9rem;
        }

        .photo-upload {
            margin-top: 16px;
            padding: 16px;
            border: 2px dashed #DAA520;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            background: rgba(218, 165, 32, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(58, 58, 58, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 80px rgba(58, 58, 58, 0.15);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e6ddd4;
        }

        .modal-header h2 {
            font-size: 1.6rem;
            color: #8B4513;
            font-weight: 500;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #8B4513;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .detail-section {
            background: #fafaf8;
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(218, 165, 32, 0.2);
        }

        .detail-section h3 {
            color: #8B4513;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .detail-section .info-item {
            margin-bottom: 16px;
        }

        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .photo-item {
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.9rem;
        }

        .list-view {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            overflow: hidden;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .list-view table {
            width: 100%;
            border-collapse: collapse;
        }

        .list-view th,
        .list-view td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid #e6ddd4;
        }

        .list-view th {
            background: #f5f1eb;
            font-weight: 500;
            color: #8B4513;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .header {
                padding: 40px 24px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .search-filters {
                grid-template-columns: 1fr;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            .card-info {
                grid-template-columns: 1fr;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>„Åü„Åπ„Çã„Åü„ÇÅ„Å´„ÄÅÁîü„Åç„Å¶„ÅÑ„Çã</h1>
            <div class="subtitle">ÊñôÁêÜ„ÇíÈÄö„Åó„Å¶È£üÊùê„ÇíÁü•„Çä„ÄÅÁî£Âú∞„Å´ÊÄù„ÅÑ„ÇíÈ¶≥„Åõ„ÄÅ„Åì„ÅÆ‰∏ñÁïå„Å®„Å§„Å™„Åå„ÇãÊóÖ„Å∏</div>
        </div>

        <div class="controls">
            <div class="search-filters">
                <div class="filter-group">
                    <label for="cuisineFilter">ÊñôÁêÜ„Ç∏„É£„É≥„É´</label>
                    <select id="cuisineFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="Á¥îÂíåÈ£ü">Á¥îÂíåÈ£ü</option>
                        <option value="ÂíåÈ£ü">ÂíåÈ£ü</option>
                        <option value="Ê¥ãÈ£ü">Ê¥ãÈ£ü</option>
                        <option value="‰∏≠ËèØ">‰∏≠ËèØ</option>
                        <option value="„Ç¢„Ç∏„Ç¢ÊñôÁêÜ">„Ç¢„Ç∏„Ç¢ÊñôÁêÜ</option>
                        <option value="„Åù„ÅÆ‰ªñ">„Åù„ÅÆ‰ªñ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="priceFilter">ÈáëÈ°çÂ∏Ø</label>
                    <select id="priceFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="~5000">„Äú5,000ÂÜÜ</option>
                        <option value="5000-10000">5,000„Äú10,000ÂÜÜ</option>
                        <option value="10000+">10,000ÂÜÜ„Äú</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="volumeFilter">Èáè</label>
                    <select id="volumeFilter">
                        <option value="">„Åô„Åπ„Å¶</option>
                        <option value="ËªΩ„ÇÅ">ËªΩ„ÇÅ</option>
                        <option value="„Åó„Å£„Åã„Çä">„Åó„Å£„Åã„Çä</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchInput">„Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢</label>
                    <input type="text" id="searchInput" placeholder="Â∫óÂêç„ÄÅÊñôÁêÜÂêç„ÅßÊ§úÁ¥¢">
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="exportVisited()">Ë°å„Å£„ÅüÂ∫ó„É™„Çπ„Éà„ÇíCSVÂá∫Âäõ</button>
                <button class="btn btn-secondary" onclick="clearVisited()">Ë®òÈå≤„ÇØ„É™„Ç¢</button>
                <div class="view-toggle">
                    <button class="active" id="galleryBtn" onclick="setView('gallery')">„Ç´„Éº„Éâ</button>
                    <button id="listBtn" onclick="setView('list')">„É™„Çπ„Éà</button>
                </div>
            </div>
        </div>

        <div class="gallery" id="gallery">
            <!-- „Ç´„Éº„Éâ„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
        </div>

        <!-- „É™„Çπ„Éà„Éì„É•„Éº -->
        <div class="list-view" id="listView">
            <table>
                <thead>
                    <tr>
                        <th>Â∫óÂêç</th>
                        <th>„Ç∏„É£„É≥„É´</th>
                        <th>ÈáëÈ°çÂ∏Ø</th>
                        <th>„Ç¢„ÇØ„Çª„Çπ</th>
                        <th>Âñ∂Ê•≠ÊôÇÈñì</th>
                        <th>ÈßêËªäÂ†¥</th>
                        <th>Êìç‰Ωú</th>
                    </tr>
                </thead>
                <tbody id="listTableBody">
                    <!-- „Éá„Éº„Çø„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Ë©≥Á¥∞ÊÉÖÂ†±</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody">
                <!-- Ë©≥Á¥∞ÊÉÖÂ†±„ÅØJavaScript„ÅßÂãïÁöÑÁîüÊàê -->
            </div>
        </div>
    </div>

    <!-- ÂÜôÁúüÊäïÁ®ø„É¢„Éº„ÉÄ„É´ -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ÂÜôÁúü„ÇíÊäïÁ®ø</h2>
                <span class="close" onclick="closePhotoModal()">&times;</span>
            </div>
            <div class="photo-upload" onclick="uploadPhoto()">
                <p>üì∏ ÂÜôÁúü„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</p>
                <p style="font-size: 0.9rem; color: #666; margin-top: 8px;">„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÂÜôÁúü„ÇíÈÅ∏Êäû</p>
            </div>
            <input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
        </div>
    </div>

    <script>
        // „Çµ„É≥„Éó„É´„Éá„Éº„Çø - Âß´Ë∑Ø„ÅÆÂ§ú„ÅÆ„ÅäÂ∫ó
        const restaurantData = [
            {
                id: 1,
                name: "„ÅÜ„Å©„ÇìÂ±ã„Å∞„Åè",
                category: "Á¥îÂíåÈ£ü",
                subcategory: "„ÅÜ„Å©„Çì",
                address: "Âß´Ë∑ØÂ∏ÇÂÜÖ",
                priceRange: "~5000",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç¢„É©„Ç´„É´„Éà",
                parking: "Êúâ„ÇäÔºà10Âè∞Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâÂæíÊ≠©15ÂàÜ",
                hours: "11:00-21:00",
                closed: "ÁÅ´ÊõúÊó•",
                phone: "079-XXX-XXXX",
                website: "",
                instagram: "",
                googleMaps: "",
                memo: "„Ç≥„Ç∑„ÅÆ„ÅÇ„ÇãÊâãÊâì„Å°„ÅÜ„Å©„Çì„ÅåËá™ÊÖ¢„ÄÇÂá∫Ê±Å„ÅåÁµ∂ÂìÅ„ÄÇ",
                tags: ["„ÅÜ„Å©„Çì", "ÊâãÊâì„Å°", "Âá∫Ê±Å", "ÈßÖËøë"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 2,
                name: "ÂÖ´ÊñπÁæéËèú",
                category: "Ê¥ãÈ£ü",
                subcategory: "„Ç§„Çø„É™„Ç¢„É≥",
                address: "ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏ÇÊú¨Áî∫68",
                priceRange: "5000-10000",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç≥„Éº„Çπ",
                parking: "ÁÑ°„ÅóÔºàËøëÈö£„Ç≥„Ç§„É≥„Éë„Éº„Ç≠„É≥„Ç∞Âà©Áî®Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâÂæíÊ≠©8ÂàÜ",
                hours: "18:00-22:00",
                closed: "Êó•ÊõúÊó•„ÉªÊúàÊõúÊó•",
                phone: "079-289-4514",
                website: "https://www.instagram.com/happobina/",
                instagram: "https://www.instagram.com/happobina/",
                googleMaps: "https://maps.app.goo.gl/CtH8rXbfD6M7vGLe7",
                memo: "„Éë„Çπ„Çø„ÇÑ„É™„Çæ„ÉÉ„Éà„ÅåÁµ∂ÂìÅ„ÄÇ„Ç∑„Çß„Éï„ÅÆÊäÄË°ì„ÅåÂÖâ„ÇãÈö†„ÇåÂÆ∂ÁöÑÂêçÂ∫ó„ÄÇ",
                tags: ["„Ç§„Çø„É™„Ç¢„É≥", "„Éë„Çπ„Çø", "„É™„Çæ„ÉÉ„Éà", "Èö†„ÇåÂÆ∂", "ÊäÄË°ì"],
                photos: [],
                visited: false,
                isOpen: true,
                article: "https://madamefigaro.jp/lifestyle/gourmet/230120-hyogo.html"
            },
            {
                id: 3,
                name: "„Éî„ÉÉ„Ç≥„É≠„Ç∑„ÉÅ„É™„Ç¢",
                category: "Ê¥ãÈ£ü",
                subcategory: "„Ç§„Çø„É™„Ç¢„É≥",
                address: "ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏ÇËä±Áî∞Áî∫‰∏äÂéüÁî∞Â≠ó‰∏ã‰∏≠Á≠ã1128-1",
                priceRange: "5000-10000",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç≥„Éº„Çπ",
                parking: "Êúâ„ÇäÔºà10Âè∞Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâËªä„Åß15ÂàÜ",
                hours: "18:00-23:00",
                closed: "ÊúàÊõúÊó•",
                phone: "079-253-3939",
                website: "https://piccola-sicilia.com/",
                instagram: "https://www.instagram.com/piccola_sicilia_himeji/",
                googleMaps: "https://maps.app.goo.gl/QzXe7Rb2vEm9Y3wh6",
                memo: "Êú¨Ê†ºÁöÑ„Å™„Ç∑„ÉÅ„É™„Ç¢ÊñôÁêÜ„ÄÇ„Ç∑„Çß„Éï„ÅÆ„Åì„Å†„Çè„Çä„ÅåÂÖâ„Çã„ÄÇ",
                tags: ["„Ç§„Çø„É™„Ç¢„É≥", "„Ç∑„ÉÅ„É™„Ç¢", "„Ç≥„Éº„Çπ", "Êú¨Ê†º"],
                photos: [],
                visited: false,
                isOpen: true,
                article: "https://madamefigaro.jp/lifestyle/gourmet/230120-hyogo.html"
            },
            {
                id: 4,
                name: "Á¶èÁî∞Ëë°ËêÑÈÖíÂ∫ó",
                category: "Ê¥ãÈ£ü",
                subcategory: "„Éï„É¨„É≥„ÉÅ",
                address: "ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏ÇÂëâÊúçÁî∫47",
                priceRange: "10000+",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç≥„Éº„Çπ",
                parking: "ÁÑ°„ÅóÔºàËøëÈö£„Ç≥„Ç§„É≥„Éë„Éº„Ç≠„É≥„Ç∞Âà©Áî®Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâÂæíÊ≠©12ÂàÜ",
                hours: "18:00-22:00",
                closed: "Êó•ÊõúÊó•„ÉªÊúàÊõúÊó•",
                phone: "079-224-1192",
                website: "https://fukuda-wine.com/",
                instagram: "https://www.instagram.com/fukuda_wine_store/",
                googleMaps: "https://maps.app.goo.gl/VzKpMn4dLw8sT6eK8",
                memo: "„ÉØ„Ç§„É≥„Å®ÊñôÁêÜ„ÅÆ„Éö„Ç¢„É™„É≥„Ç∞„ÅåÁ¥†Êô¥„Çâ„Åó„ÅÑ„ÄÇ",
                tags: ["„Éï„É¨„É≥„ÉÅ", "„ÉØ„Ç§„É≥", "„Éö„Ç¢„É™„É≥„Ç∞", "È´òÁ¥ö"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 5,
                name: "„Ç®„Ç∞„É¨„ÉÉ„Éà",
                category: "Ê¥ãÈ£ü",
                subcategory: "„Éï„É•„Éº„Ç∏„Éß„É≥",
                address: "ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏ÇÈßÖÂâçÁî∫241",
                priceRange: "5000-10000",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç¢„É©„Ç´„É´„Éà",
                parking: "ÁÑ°„ÅóÔºàËøëÈö£„Ç≥„Ç§„É≥„Éë„Éº„Ç≠„É≥„Ç∞Âà©Áî®Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâÂæíÊ≠©3ÂàÜ",
                hours: "17:30-24:00",
                closed: "‰∏çÂÆö‰ºë",
                phone: "079-284-5558",
                website: "https://aigrette-himeji.com/",
                instagram: "https://www.instagram.com/aigrette_himeji/",
                googleMaps: "https://maps.app.goo.gl/HzKp8qR2nF9wV5eA9",
                memo: "Ââµ‰ΩúÊñôÁêÜ„Å®„ÇØ„É©„Éï„Éà„Éì„Éº„É´„ÅåÊ•Ω„Åó„ÇÅ„Çã„ÄÇ",
                tags: ["„Éï„É•„Éº„Ç∏„Éß„É≥", "Ââµ‰Ωú", "„ÇØ„É©„Éï„Éà„Éì„Éº„É´", "ÈßÖËøë"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 6,
                name: "Á¥ÖÈ∂¥",
                category: "‰∏≠ËèØ",
                subcategory: "‰∏≠ËèØÂÖ®Ëà¨",
                address: "ÂÖµÂ∫´ÁúåÂß´Ë∑ØÂ∏ÇÊú¨Áî∫68",
                priceRange: "5000-10000",
                volume: "„Åó„Å£„Åã„Çä",
                orderStyle: "„Ç¢„É©„Ç´„É´„Éà",
                parking: "ÁÑ°„ÅóÔºàËøëÈö£„Ç≥„Ç§„É≥„Éë„Éº„Ç≠„É≥„Ç∞Âà©Áî®Ôºâ",
                access: "Âß´Ë∑ØÈßÖ„Åã„ÇâÂæíÊ≠©8ÂàÜ",
                hours: "11:30-14:30, 17:30-21:30",
                closed: "ÁÅ´ÊõúÊó•",
                phone: "079-222-8765",
                website: "https://kouzuru-himeji.com/",
                instagram: "https://www.instagram.com/kouzuru_himeji/",
                googleMaps: "https://maps.app.goo.gl/RY5msbeKvUR6zVN76",
                memo: "Âß´Ë∑ØÂüéËøë„Åè„ÅÆËÄÅËàó‰∏≠ËèØÊñôÁêÜÂ∫ó„ÄÇ‰ºùÁµ±„Å®Èù©Êñ∞„ÅåËûçÂêà„Åó„ÅüÂë≥„Çè„ÅÑ„ÄÇ",
                tags: ["‰∏≠ËèØ", "ËÄÅËàó", "Âß´Ë∑ØÂüéËøë„Åè", "‰ºùÁµ±"],
                photos: [],
                visited: false,
                isOpen: true
            }
        ];

        let filteredData = [...restaurantData];
        let currentView = 'gallery';
        let visitedRestaurants = new Set();
        let uploadedPhotos = [];

        // „Éö„Éº„Ç∏ÂàùÊúüÂåñ
        function init() {
            loadVisitedData();
            renderView();
            setupEventListeners();
            updateStats();
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
        function setupEventListeners() {
            document.getElementById('cuisineFilter').addEventListener('change', applyFilters);
            document.getElementById('priceFilter').addEventListener('change', applyFilters);
            document.getElementById('volumeFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
        }

        // Ë®™Âïè„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        function loadVisitedData() {
            // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„Åã„ÇâË™≠„ÅøËæº„Åø
            // „Åì„Åì„Åß„ÅØ„É°„É¢„É™ÂÜÖ„ÅßÁÆ°ÁêÜ
        }

        // „Éì„É•„ÉºË°®Á§∫
        function renderView() {
            if (currentView === 'gallery') {
                renderGallery();
            } else {
                renderList();
            }
        }

        // „ÇÆ„É£„É©„É™„ÉºË°®Á§∫
        function renderGallery() {
            const gallery = document.getElementById('gallery');
            gallery.style.display = 'grid';
            document.getElementById('listView').style.display = 'none';
            
            gallery.innerHTML = '';
            filteredData.forEach(item => {
                const card = createCard(item);
                gallery.appendChild(card);
            });
        }

        // „É™„Çπ„ÉàË°®Á§∫
        function renderList() {
            document.getElementById('gallery').style.display = 'none';
            const listView = document.getElementById('listView');
            listView.style.display = 'block';
            
            const tbody = document.getElementById('listTableBody');
            tbody.innerHTML = '';
            
            filteredData.forEach(item => {
                const row = createListRow(item);
                tbody.appendChild(row);
            });
        }

        // „Ç´„Éº„Éâ‰ΩúÊàê
        function createCard(item) {
            const card = document.createElement('div');
            card.className = `card ${!item.isOpen ? 'closed' : ''}`;
            
            const visitedBadge = visitedRestaurants.has(item.id) ? '<span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">Ë°å„Å£„Åü!</span>' : '';
            
            card.innerHTML = `
                <div class="card-header">
                    <div>
                        <div class="card-title">${item.name} ${visitedBadge}</div>
                        <div class="card-address">${item.address}</div>
                    </div>
                    <div class="card-type">${item.subcategory}</div>
                </div>
                <div class="tags">
                    ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="card-info">
                    <div class="info-item">
                        <div class="info-label">ÈáëÈ°çÂ∏Ø</div>
                        <div class="info-value">${getPriceLabel(item.priceRange)}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Èáè</div>
                        <div class="info-value">${item.volume}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">„Ç¢„ÇØ„Çª„Çπ</div>
                        <div class="info-value">${item.access}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Âñ∂Ê•≠ÊôÇÈñì</div>
                        <div class="info-value">${item.hours}</div>
                    </div>
                </div>
                <div class="card-actions">
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">Ë©≥Á¥∞„ÇíË¶ã„Çã</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">Â†¥ÊâÄ„Çí„Åø„Çã</button>
                    <button class="btn btn-secondary btn-small" onclick="markAsVisited(${item.id})">${visitedRestaurants.has(item.id) ? 'Ë°å„Å£„ÅüË®òÈå≤ÂâäÈô§' : 'Ë°å„Å£„Åü!'}</button>
                </div>
            `;
            return card;
        }

        // „É™„Çπ„ÉàË°å‰ΩúÊàê
        function createListRow(item) {
            const row = document.createElement('tr');
            row.className = !item.isOpen ? 'closed' : '';
            
            const visitedBadge = visitedRestaurants.has(item.id) ? '‚úì' : '';
            
            row.innerHTML = `
                <td>${item.name} ${visitedBadge}</td>
                <td>${item.subcategory}</td>
                <td>${getPriceLabel(item.priceRange)}</td>
                <td>${item.access}</td>
                <td>${item.hours}</td>
                <td>${item.parking}</td>
                <td>
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">Ë©≥Á¥∞</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">Â†¥ÊâÄ</button>
                    <button class="btn btn-secondary btn-small" onclick="markAsVisited(${item.id})">${visitedRestaurants.has(item.id) ? 'ÂâäÈô§' : 'Ë°å„Å£„Åü'}</button>
                </td>
            `;
            return row;
        }

        // ÈáëÈ°ç„É©„Éô„É´ÂèñÂæó
        function getPriceLabel(priceRange) {
            const labels = {
                '~5000': '„Äú5,000ÂÜÜ',
                '5000-10000': '5,000„Äú10,000ÂÜÜ',
                '10000+': '10,000ÂÜÜ„Äú'
            };
            return labels[priceRange] || priceRange;
        }

        // „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
        function applyFilters() {
            const cuisineFilter = document.getElementById('cuisineFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;
            const volumeFilter = document.getElementById('volumeFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();

            filteredData = restaurantData.filter(item => {
                if (cuisineFilter && item.category !== cuisineFilter) return false;
                if (priceFilter && item.priceRange !== priceFilter) return false;
                if (volumeFilter && item.volume !== volumeFilter) return false;

                if (searchText) {
                    const searchableText = `${item.name} ${item.subcategory} ${item.tags.join(' ')} ${item.memo}`.toLowerCase();
                    if (!searchableText.includes(searchText)) return false;
                }

                return true;
            });

            renderView();
            updateStats();
        }

        // Ë®™Âïè„Éû„Éº„ÇØ
        function markAsVisited(id) {
            if (visitedRestaurants.has(id)) {
                visitedRestaurants.delete(id);
            } else {
                visitedRestaurants.add(id);
            }
            renderView();
            updateStats();
        }

        // Áµ±Ë®àÊÉÖÂ†±Êõ¥Êñ∞
        function updateStats() {
            // „Éá„Éº„ÇøÁµ±Ë®à„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÂâäÈô§„Åó„Åü„Åü„ÇÅ„ÄÅ„Åì„ÅÆÈñ¢Êï∞„ÅØÁ©∫„Å´„Åô„Çã
        }

        // Ë©≥Á¥∞Ë°®Á§∫
        function showDetail(id) {
            const item = restaurantData.find(item => item.id === id);
            if (!item) return;

            document.getElementById('modalTitle').textContent = item.name;
            document.getElementById('modalBody').innerHTML = `
                <div class="detail-grid">
                    <div class="detail-section">
                        <h3>Âü∫Êú¨ÊÉÖÂ†±</h3>
                        <div class="info-item">
                            <div class="info-label">„Ç∏„É£„É≥„É´</div>
                            <div class="info-value">${item.category} > ${item.subcategory}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">‰ΩèÊâÄ</div>
                            <div class="info-value">${item.address}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ÈõªË©±Áï™Âè∑</div>
                            <div class="info-value">${item.phone}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Âñ∂Ê•≠ÊôÇÈñì</div>
                            <div class="info-value">${item.hours}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ÂÆö‰ºëÊó•</div>
                            <div class="info-value">${item.closed}</div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>„Ç¢„ÇØ„Çª„Çπ„Éª‰∫àÁ¥Ñ</h3>
                        <div class="info-item">
                            <div class="info-label">„Ç¢„ÇØ„Çª„Çπ</div>
                            <div class="info-value">${item.access}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ÈßêËªäÂ†¥</div>
                            <div class="info-value">${item.parking}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ÈáëÈ°çÂ∏Ø</div>
                            <div class="info-value">${getPriceLabel(item.priceRange)}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">È†º„ÅøÊñπ</div>
                            <div class="info-value">${item.orderStyle}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">„Éõ„Éº„É†„Éö„Éº„Ç∏</div>
                            <div class="info-value">
                                ${item.website ? `<a href="${item.website}" target="_blank" style="color: #DAA520; text-decoration: none;">„Çµ„Ç§„Éà„ÇíË¶ã„Çã</a>` : 'ÊÉÖÂ†±„Å™„Åó'}
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Instagram</div>
                            <div class="info-value">
                                ${item.instagram ? `<a href="${item.instagram}" target="_blank" style="color: #DAA520; text-decoration: none;">@„Ç¢„Ç´„Ç¶„É≥„Éà„ÇíË¶ã„Çã</a>` : 'ÊÉÖÂ†±„Å™„Åó'}
                            </div>
                        </div>
                        ${item.article ? `
                        <div class="info-item">
                            <div class="info-label">„Åä„Åô„Åô„ÇÅË®ò‰∫ã</div>
                            <div class="info-value">
                                <a href="${item.article}" target="_blank" style="color: #DAA520; text-decoration: none;">Madame FigaroË®ò‰∫ã</a>
                            </div>
                        </div>
                        ` : ''}
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="makeReservation(${item.id})">‰∫àÁ¥Ñ„Éª„ÅäÂïè„ÅÑÂêà„Çè„Åõ</button>
                            <button class="btn btn-secondary" onclick="showOnMap(${item.id})" style="margin-left: 10px;">Google Map„ÅßË¶ã„Çã</button>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>ÂÆ∂ËÄÅ„ÅÆ„É°„É¢</h3>
                        <p>${item.memo}</p>
                        <div class="tags" style="margin-top: 16px;">
                            ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>ÂÜôÁúü„ÉªË®òÈå≤</h3>
                        <button class="btn btn-secondary" onclick="openPhotoModal(${item.id})" style="margin-bottom: 16px;">ÂÜôÁúü„ÇíÊäïÁ®ø</button>
                        <div class="photos-grid">
                            ${item.photos.length > 0 ? 
                                item.photos.map(photo => `<div class="photo-item">${photo}</div>`).join('') :
                                '<div class="photo-item">ÂÜôÁúü„Åå„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì</div>'
                            }
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('detailModal').style.display = 'block';
        }

        // ‰∫àÁ¥Ñ„Ç∑„Çπ„ÉÜ„É†
        function makeReservation(id) {
            const item = restaurantData.find(item => item.id === id);
            if (!item) return;

            // ÈõªË©±Áï™Âè∑„ÇÑ‰∫àÁ¥ÑÂ∞ÇÁî®LINE„Å´ÈÅ∑Áßª
            if (item.phone && item.phone !== '') {
                window.open(`tel:${item.phone}`, '_self');
            } else {
                alert('„ÅäÈõªË©±„Åß„ÅÆ„Åî‰∫àÁ¥Ñ„Çí„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ');
            }
        }

        // ÂÜôÁúüÊäïÁ®ø„É¢„Éº„ÉÄ„É´
        function openPhotoModal(restaurantId) {
            window.currentRestaurantId = restaurantId;
            document.getElementById('photoModal').style.display = 'block';
        }

        function closePhotoModal() {
            document.getElementById('photoModal').style.display = 'none';
        }

        function uploadPhoto() {
            document.getElementById('photoInput').click();
        }

        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Çµ„Éº„Éê„Éº„Å´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
            const photoData = {
                id: uploadedPhotos.length + 1,
                restaurantId: window.currentRestaurantId,
                filename: file.name,
                timestamp: new Date()
            };

            uploadedPhotos.push(photoData);
            
            // Ë©≤ÂΩì„É¨„Çπ„Éà„É©„É≥„ÅÆÂÜôÁúüÈÖçÂàó„Å´ËøΩÂä†
            const restaurant = restaurantData.find(r => r.id === window.currentRestaurantId);
            if (restaurant) {
                restaurant.photos.push(`üì∏ ${file.name}`);
            }

            updateStats();
            closePhotoModal();
            alert('ÂÜôÁúü„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„Åæ„Åó„ÅüÔºÅ');
        }

        // „É¢„Éº„ÉÄ„É´Èñâ„Åò„Çã
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // CSVÂá∫Âäõ
        function exportVisited() {
            if (visitedRestaurants.size === 0) {
                alert('„Åæ„Å†Ë°å„Å£„ÅüÂ∫ó„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');
                return;
            }

            const visitedData = restaurantData.filter(item => visitedRestaurants.has(item.id));
            const csvContent = convertToCSV(visitedData);
            downloadCSV(csvContent, 'Ë°å„Å£„ÅüÂ∫ó„É™„Çπ„Éà.csv');
        }

        // CSVÂ§âÊèõ
        function convertToCSV(data) {
            const headers = [
                'Â∫óÂêç', '„Ç∏„É£„É≥„É´', '„Çµ„Éñ„Ç´„ÉÜ„Ç¥„É™', '‰ΩèÊâÄ', 'ÈáëÈ°çÂ∏Ø', 'Èáè', 'È†º„ÅøÊñπ',
                '„Ç¢„ÇØ„Çª„Çπ', 'Âñ∂Ê•≠ÊôÇÈñì', 'ÂÆö‰ºëÊó•', 'ÈßêËªäÂ†¥', 'ÈõªË©±Áï™Âè∑', '„É°„É¢'
            ];

            const rows = data.map(item => [
                item.name,
                item.category,
                item.subcategory,
                item.address,
                getPriceLabel(item.priceRange),
                item.volume,
                item.orderStyle,
                item.access,
                item.hours,
                item.closed,
                item.parking,
                item.phone,
                item.memo
            ]);

            return [headers, ...rows].map(row => 
                row.map(field => `"${field}"`).join(',')
            ).join('\n');
        }

        // CSV„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        function downloadCSV(content, filename) {
            const blob = new Blob(['\uFEFF' + content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Ë®òÈå≤„ÇØ„É™„Ç¢
        function clearVisited() {
            if (confirm('Ë°å„Å£„ÅüÂ∫ó„ÅÆË®òÈå≤„Çí„Åô„Åπ„Å¶„ÇØ„É™„Ç¢„Åó„Åæ„Åô„ÅãÔºü')) {
                visitedRestaurants.clear();
                renderView();
                updateStats();
            }
        }

        // Ë°®Á§∫Âàá„ÇäÊõø„Åà
        function setView(viewType) {
            const galleryBtn = document.getElementById('galleryBtn');
            const listBtn = document.getElementById('listBtn');
            
            galleryBtn.classList.remove('active');
            listBtn.classList.remove('active');
            
            if (viewType === 'gallery') {
                galleryBtn.classList.add('active');
                currentView = 'gallery';
            } else {
                listBtn.classList.add('active');
                currentView = 'list';
            }
            
            renderView();
        }

        // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„ÅÆÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', init);

        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.addEventListener('click', function(event) {
            const detailModal = document.getElementById('detailModal');
            const photoModal = document.getElementById('photoModal');
            
            if (event.target === detailModal) {
                closeModal();
            }
            if (event.target === photoModal) {
                closePhotoModal();
            }
        });
    </script>
</body>
</html>
