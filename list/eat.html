
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŸã¹ã‚‹ãŸã‚ã«ã€ç”Ÿãã¦ã„ã‚‹ - å§«è·¯ã‚°ãƒ«ãƒ¡ãƒãƒ¼ã‚¿ãƒ«</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #faf8f6 0%, #f0ede8 100%);
            min-height: 100vh;
            color: #3a3a3a;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.9);
            padding: 60px 40px;
            border-radius: 24px;
            text-align: center;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(218, 165, 32, 0.1) 0%, transparent 70%);
            animation: shimmer 6s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.3; transform: rotate(0deg); }
            50% { opacity: 0.6; transform: rotate(180deg); }
        }

        .header h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 3.5rem;
            color: #8B4513;
            margin-bottom: 16px;
            font-weight: 500;
            letter-spacing: 0.05em;
            position: relative;
            z-index: 2;
        }

        .header .subtitle {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.2rem;
            color: #DAA520;
            margin-bottom: 20px;
            font-weight: 300;
            position: relative;
            z-index: 2;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 32px;
            font-weight: 400;
            position: relative;
            z-index: 2;
        }

        .princess-quote {
            background: linear-gradient(135deg, #fff9e6, #ffeaa7);
            padding: 20px 30px;
            border-radius: 16px;
            margin: 20px 0;
            border-left: 4px solid #DAA520;
            font-style: italic;
            color: #8B4513;
            position: relative;
            z-index: 2;
        }

        .princess-quote::before {
            content: 'ğŸ‘¸';
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .controls {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 500;
            margin-bottom: 12px;
            color: #8B4513;
            font-size: 0.95rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 16px 20px;
            border: 2px solid #e6ddd4;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafaf8;
            color: #3a3a3a;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #DAA520;
            box-shadow: 0 0 0 4px rgba(218, 165, 32, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            box-shadow: 0 4px 16px rgba(218, 165, 32, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #B8860B, #DAA520);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(218, 165, 32, 0.4);
        }

        .btn-secondary {
            background: #f5f1eb;
            color: #8B4513;
            border: 2px solid #e6ddd4;
        }

        .btn-secondary:hover {
            background: #e6ddd4;
            transform: translateY(-2px);
        }

        .view-toggle {
            display: flex;
            background: #f5f1eb;
            border-radius: 12px;
            padding: 4px;
            gap: 4px;
        }

        .view-toggle button {
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            color: #8B4513;
            font-weight: 400;
        }

        .view-toggle button.active {
            background: #DAA520;
            color: white;
            box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
        }

        .stats {
            background: rgba(255, 255, 255, 0.9);
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 32px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fafaf8, #f5f1eb);
            border-radius: 16px;
            border: 1px solid rgba(218, 165, 32, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 300;
            color: #DAA520;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #8B4513;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 32px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.9);
            overflow: hidden;
        }

        .card.closed {
            opacity: 0.6;
            background: rgba(100, 100, 100, 0.1);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 60px rgba(58, 58, 58, 0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 500;
            color: #8B4513;
            margin-bottom: 8px;
            letter-spacing: 0.01em;
        }

        .card-address {
            color: #666;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .card-type {
            background: linear-gradient(135deg, #DAA520, #B8860B);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
        }

        .card-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 28px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: 400;
        }

        .info-value {
            font-weight: 500;
            color: #3a3a3a;
            font-size: 0.95rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .tag {
            background: rgba(218, 165, 32, 0.1);
            color: #8B4513;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 400;
        }

        .card-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e6ddd4;
        }

        .btn-small {
            padding: 12px 24px;
            font-size: 0.9rem;
        }

        .photo-upload {
            margin-top: 16px;
            padding: 16px;
            border: 2px dashed #DAA520;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            background: rgba(218, 165, 32, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(58, 58, 58, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 80px rgba(58, 58, 58, 0.15);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e6ddd4;
        }

        .modal-header h2 {
            font-size: 1.6rem;
            color: #8B4513;
            font-weight: 500;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #8B4513;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .detail-section {
            background: #fafaf8;
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(218, 165, 32, 0.2);
        }

        .detail-section h3 {
            color: #8B4513;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .detail-section .info-item {
            margin-bottom: 16px;
        }

        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .photo-item {
            aspect-ratio: 1;
            border-radius: 12px;
            overflow: hidden;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.9rem;
        }

        .list-view {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            overflow: hidden;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(58, 58, 58, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .list-view table {
            width: 100%;
            border-collapse: collapse;
        }

        .list-view th,
        .list-view td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid #e6ddd4;
        }

        .list-view th {
            background: #f5f1eb;
            font-weight: 500;
            color: #8B4513;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .header {
                padding: 40px 24px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .search-filters {
                grid-template-columns: 1fr;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            .card-info {
                grid-template-columns: 1fr;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ãŸã¹ã‚‹ãŸã‚ã«ã€ç”Ÿãã¦ã„ã‚‹</h1>
            <div class="subtitle">ä¸–ç•Œã‚’å‘³ã‚ã†ãŸã‚ã«</div>
            <div class="subtitle">æ–™ç†ã‚’é€šã—ã¦é£Ÿæã‚’çŸ¥ã‚Šã€ç”£åœ°ã«æ€ã„ã‚’é¦³ã›ã€ã“ã®ä¸–ç•Œã¨ã¤ãªãŒã‚‹æ—…ã¸</div>
        </div>

        <div class="controls">
            <div class="search-filters">
                <div class="filter-group">
                    <label for="cuisineFilter">æ–™ç†ã‚¸ãƒ£ãƒ³ãƒ«</label>
                    <select id="cuisineFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="ç´”å’Œé£Ÿ">ç´”å’Œé£Ÿ</option>
                        <option value="å’Œé£Ÿ">å’Œé£Ÿ</option>
                        <option value="æ´‹é£Ÿ">æ´‹é£Ÿ</option>
                        <option value="ä¸­è¯">ä¸­è¯</option>
                        <option value="ã‚¢ã‚¸ã‚¢æ–™ç†">ã‚¢ã‚¸ã‚¢æ–™ç†</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="priceFilter">é‡‘é¡å¸¯</label>
                    <select id="priceFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="~5000">ã€œ5,000å††</option>
                        <option value="5000-10000">5,000ã€œ10,000å††</option>
                        <option value="10000+">10,000å††ã€œ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="volumeFilter">é‡</label>
                    <select id="volumeFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="è»½ã‚">è»½ã‚</option>
                        <option value="ã—ã£ã‹ã‚Š">ã—ã£ã‹ã‚Š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchInput">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</label>
                    <input type="text" id="searchInput" placeholder="åº—åã€æ–™ç†åã§æ¤œç´¢">
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="exportVisited()">è¡Œã£ãŸåº—ãƒªã‚¹ãƒˆã‚’CSVå‡ºåŠ›</button>
                <button class="btn btn-secondary" onclick="clearVisited()">è¨˜éŒ²ã‚¯ãƒªã‚¢</button>
                <div class="view-toggle">
                    <button class="active" id="galleryBtn" onclick="setView('gallery')">ã‚«ãƒ¼ãƒ‰</button>
                    <button id="listBtn" onclick="setView('list')">ãƒªã‚¹ãƒˆ</button>
                </div>
            </div>
        </div>

        <div class="gallery" id="gallery">
            <!-- ã‚«ãƒ¼ãƒ‰ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
        </div>

        <!-- ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ -->
        <div class="list-view" id="listView">
            <table>
                <thead>
                    <tr>
                        <th>åº—å</th>
                        <th>ã‚¸ãƒ£ãƒ³ãƒ«</th>
                        <th>é‡‘é¡å¸¯</th>
                        <th>ã‚¢ã‚¯ã‚»ã‚¹</th>
                        <th>å–¶æ¥­æ™‚é–“</th>
                        <th>é§è»Šå ´</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="listTableBody">
                    <!-- ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">è©³ç´°æƒ…å ±</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody">
                <!-- è©³ç´°æƒ…å ±ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- å†™çœŸæŠ•ç¨¿ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>å†™çœŸã‚’æŠ•ç¨¿</h2>
                <span class="close" onclick="closePhotoModal()">&times;</span>
            </div>
            <div class="photo-upload" onclick="uploadPhoto()">
                <p>ğŸ“¸ å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</p>
                <p style="font-size: 0.9rem; color: #666; margin-top: 8px;">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†™çœŸã‚’é¸æŠ</p>
            </div>
            <input type="file" id="photoInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ - å§«è·¯ã®å¤œã®ãŠåº—
        const restaurantData = [
            {
                id: 1,
                name: "ã†ã©ã‚“å±‹ã°ã",
                category: "ç´”å’Œé£Ÿ",
                subcategory: "ã†ã©ã‚“",
                address: "å§«è·¯å¸‚å†…",
                priceRange: "~5000",
                volume: "ã—ã£ã‹ã‚Š",
                orderStyle: "ã‚¢ãƒ©ã‚«ãƒ«ãƒˆ",
                parking: "æœ‰ã‚Šï¼ˆ10å°ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰å¾’æ­©15åˆ†",
                hours: "11:00-21:00",
                closed: "ç«æ›œæ—¥",
                phone: "079-XXX-XXXX",
                website: "",
                instagram: "",
                googleMaps: "",
                memo: "ã‚³ã‚·ã®ã‚ã‚‹æ‰‹æ‰“ã¡ã†ã©ã‚“ãŒè‡ªæ…¢ã€‚å‡ºæ±ãŒçµ¶å“ã€‚",
                tags: ["ã†ã©ã‚“", "æ‰‹æ‰“ã¡", "å‡ºæ±", "é§…è¿‘"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 2,
                name: "å…«æ–¹ç¾èœ",
                category: "æ´‹é£Ÿ",
                subcategory: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³",
                address: "å…µåº«çœŒå§«è·¯å¸‚æœ¬ç”º68",
                priceRange: "5000-10000",
                volume: "ã—ã£ã‹ã‚Š",
                orderStyle: "ã‚³ãƒ¼ã‚¹",
                parking: "ç„¡ã—ï¼ˆè¿‘éš£ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°åˆ©ç”¨ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰å¾’æ­©8åˆ†",
                hours: "18:00-22:00",
                closed: "æ—¥æ›œæ—¥ãƒ»æœˆæ›œæ—¥",
                phone: "079-289-4514",
                website: "https://www.instagram.com/happobina/",
                instagram: "https://www.instagram.com/happobina/",
                googleMaps: "https://maps.app.goo.gl/CtH8rXbfD6M7vGLe7",
                memo: "ãƒ‘ã‚¹ã‚¿ã‚„ãƒªã‚¾ãƒƒãƒˆãŒçµ¶å“ã€‚ã‚·ã‚§ãƒ•ã®æŠ€è¡“ãŒå…‰ã‚‹éš ã‚Œå®¶çš„ååº—ã€‚",
                tags: ["ã‚¤ã‚¿ãƒªã‚¢ãƒ³", "ãƒ‘ã‚¹ã‚¿", "ãƒªã‚¾ãƒƒãƒˆ", "éš ã‚Œå®¶", "æŠ€è¡“"],
                photos: [],
                visited: false,
                isOpen: true,
                article: "https://madamefigaro.jp/lifestyle/gourmet/230120-hyogo.html"
            },
            {
                id: 3,
                name: "ãƒ”ãƒƒã‚³ãƒ©ã‚·ãƒãƒªã‚¢",
                category: "æ´‹é£Ÿ",
                subcategory: "ã‚¤ã‚¿ãƒªã‚¢ãƒ³",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°å­—ä¸‹ä¸­ç­‹1128-1",
                priceRange: "5000-10000",
                volume: "ã—ã£ã‹ã‚Š",
                orderStyle: "ã‚³ãƒ¼ã‚¹",
                parking: "æœ‰ã‚Šï¼ˆ10å°ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰è»Šã§15åˆ†",
                hours: "18:00-23:00",
                closed: "æœˆæ›œæ—¥",
                phone: "079-253-3939",
                website: "https://piccola-sicilia.com/",
                instagram: "https://www.instagram.com/piccolasicilia?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
                googleMaps: "https://maps.app.goo.gl/QzXe7Rb2vEm9Y3wh6",
                memo: "æœ¬æ ¼çš„ãªã‚·ãƒãƒªã‚¢æ–™ç†ã€‚ã‚·ã‚§ãƒ•ã®ã“ã ã‚ã‚ŠãŒå…‰ã‚‹ã€‚",
                tags: ["ã‚¤ã‚¿ãƒªã‚¢ãƒ³", "ã‚·ãƒãƒªã‚¢", "ã‚³ãƒ¼ã‚¹", "æœ¬æ ¼"],
                photos: [],
                visited: false,
                isOpen: true,
                article: "https://madamefigaro.jp/lifestyle/gourmet/230120-hyogo.html"
            },
            {
                id: 4,
                name: "ç¦ç”°è‘¡è„å•†åº—eaudevie",
                category: "æ´‹é£Ÿ",
                subcategory: "ãƒ•ãƒ¬ãƒ³ãƒ",
                address: "ã€’670-0903 å…µåº«çœŒå§«è·¯å¸‚ç«‹ç”ºï¼’ï¼– ç¬¬ï¼’å…«æœ¨ãƒ“ãƒ«",
                priceRange: "~5,000",
                volume: "èª¿æ•´å¯",
                orderStyle: "ã‚¢ãƒ©ã‚«ãƒ«ãƒˆ",
                parking: "ç„¡ã—ï¼ˆè¿‘éš£ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°åˆ©ç”¨ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰å¾’æ­©8åˆ†",
                hours: "18:00-24:00",
                closed: "æ—¥æ›œæ—¥",
                phone: "-",
                website: "ãªã—",
                instagram: "https://www.instagram.com/eaudevie29?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
                googleMaps: "https://maps.app.goo.gl/MzQWYTYnx25ex9RB8",
                memo: "æ˜¥ã¯ãƒ†ãƒ©ã‚¹ãŒæ°—æŒã¡è‰¯ã„",
                tags: ["ãƒ•ãƒ¬ãƒ³ãƒ", "ãƒ¯ã‚¤ãƒ³","ãƒŠãƒãƒ¥ãƒ¼ãƒ«"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 5,
                name: "ã‚¨ã‚°ãƒ¬ãƒƒãƒˆ",
                category: "æ´‹é£Ÿ",
                subcategory: "ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³",
                address: "å…µåº«çœŒå§«è·¯å¸‚é§…å‰ç”º241",
                priceRange: "5000-10000",
                volume: "ã—ã£ã‹ã‚Š",
                orderStyle: "ã‚¢ãƒ©ã‚«ãƒ«ãƒˆ",
                parking: "ç„¡ã—ï¼ˆè¿‘éš£ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°åˆ©ç”¨ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰å¾’æ­©3åˆ†",
                hours: "17:30-24:00",
                closed: "ä¸å®šä¼‘",
                phone: "079-284-5558",
                website: "https://aigrette-himeji.com/",
                instagram: "https://www.instagram.com/aigrette_himeji/",
                googleMaps: "https://maps.app.goo.gl/HzKp8qR2nF9wV5eA9",
                memo: "å‰µä½œæ–™ç†ã¨ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ãŒæ¥½ã—ã‚ã‚‹ã€‚",
                tags: ["ãƒ•ãƒ¥ãƒ¼ã‚¸ãƒ§ãƒ³", "å‰µä½œ", "ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«", "é§…è¿‘"],
                photos: [],
                visited: false,
                isOpen: true
            },
            {
                id: 6,
                name: "ç´…é¶´",
                category: "ä¸­è¯",
                subcategory: "ä¸­è¯å…¨èˆ¬",
                address: "å…µåº«çœŒå§«è·¯å¸‚æœ¬ç”º68",
                priceRange: "5000-10000",
                volume: "ã—ã£ã‹ã‚Š",
                orderStyle: "ã‚¢ãƒ©ã‚«ãƒ«ãƒˆ",
                parking: "ç„¡ã—ï¼ˆè¿‘éš£ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°åˆ©ç”¨ï¼‰",
                access: "å§«è·¯é§…ã‹ã‚‰å¾’æ­©8åˆ†",
                hours: "11:30-14:30, 17:30-21:30",
                closed: "ç«æ›œæ—¥",
                phone: "079-222-8765",
                website: "https://kouzuru-himeji.com/",
                instagram: "https://www.instagram.com/kouzuru_himeji/",
                googleMaps: "https://maps.app.goo.gl/RY5msbeKvUR6zVN76",
                memo: "å§«è·¯åŸè¿‘ãã®è€èˆ—ä¸­è¯æ–™ç†åº—ã€‚ä¼çµ±ã¨é©æ–°ãŒèåˆã—ãŸå‘³ã‚ã„ã€‚",
                tags: ["ä¸­è¯", "è€èˆ—", "å§«è·¯åŸè¿‘ã", "ä¼çµ±"],
                photos: [],
                visited: false,
                isOpen: true
            }
        ];

        let filteredData = [...restaurantData];
        let currentView = 'gallery';
        let visitedRestaurants = new Set();
        let uploadedPhotos = [];

        // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
        function init() {
            loadVisitedData();
            renderView();
            setupEventListeners();
            updateStats();
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            document.getElementById('cuisineFilter').addEventListener('change', applyFilters);
            document.getElementById('priceFilter').addEventListener('change', applyFilters);
            document.getElementById('volumeFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
        }

        // è¨ªå•ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadVisitedData() {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰èª­ã¿è¾¼ã¿
            // ã“ã“ã§ã¯ãƒ¡ãƒ¢ãƒªå†…ã§ç®¡ç†
        }

        // ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function renderView() {
            if (currentView === 'gallery') {
                renderGallery();
            } else {
                renderList();
            }
        }

        // ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¡¨ç¤º
        function renderGallery() {
            const gallery = document.getElementById('gallery');
            gallery.style.display = 'grid';
            document.getElementById('listView').style.display = 'none';
            
            gallery.innerHTML = '';
            filteredData.forEach(item => {
                const card = createCard(item);
                gallery.appendChild(card);
            });
        }

        // ãƒªã‚¹ãƒˆè¡¨ç¤º
        function renderList() {
            document.getElementById('gallery').style.display = 'none';
            const listView = document.getElementById('listView');
            listView.style.display = 'block';
            
            const tbody = document.getElementById('listTableBody');
            tbody.innerHTML = '';
            
            filteredData.forEach(item => {
                const row = createListRow(item);
                tbody.appendChild(row);
            });
        }

        // ã‚«ãƒ¼ãƒ‰ä½œæˆ
        function createCard(item) {
            const card = document.createElement('div');
            card.className = `card ${!item.isOpen ? 'closed' : ''}`;
            
            const visitedBadge = visitedRestaurants.has(item.id) ? '<span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 8px; font-size: 0.8rem;">è¡Œã£ãŸ!</span>' : '';
            
            card.innerHTML = `
                <div class="card-header">
                    <div>
                        <div class="card-title">${item.name} ${visitedBadge}</div>
                        <div class="card-address">${item.address}</div>
                    </div>
                    <div class="card-type">${item.subcategory}</div>
                </div>
                <div class="tags">
                    ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="card-info">
                    <div class="info-item">
                        <div class="info-label">é‡‘é¡å¸¯</div>
                        <div class="info-value">${getPriceLabel(item.priceRange)}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">é‡</div>
                        <div class="info-value">${item.volume}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ã‚¢ã‚¯ã‚»ã‚¹</div>
                        <div class="info-value">${item.access}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">å–¶æ¥­æ™‚é–“</div>
                        <div class="info-value">${item.hours}</div>
                    </div>
                </div>
                <div class="card-actions">
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">è©³ç´°ã‚’è¦‹ã‚‹</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">å ´æ‰€ã‚’ã¿ã‚‹</button>
                    <button class="btn btn-secondary btn-small" onclick="markAsVisited(${item.id})">${visitedRestaurants.has(item.id) ? 'è¡Œã£ãŸè¨˜éŒ²å‰Šé™¤' : 'è¡Œã£ãŸ!'}</button>
                </div>
            `;
            return card;
        }

        // ãƒªã‚¹ãƒˆè¡Œä½œæˆ
        function createListRow(item) {
            const row = document.createElement('tr');
            row.className = !item.isOpen ? 'closed' : '';
            
            const visitedBadge = visitedRestaurants.has(item.id) ? 'âœ“' : '';
            
            row.innerHTML = `
                <td>${item.name} ${visitedBadge}</td>
                <td>${item.subcategory}</td>
                <td>${getPriceLabel(item.priceRange)}</td>
                <td>${item.access}</td>
                <td>${item.hours}</td>
                <td>${item.parking}</td>
                <td>
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">è©³ç´°</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">å ´æ‰€</button>
                    <button class="btn btn-secondary btn-small" onclick="markAsVisited(${item.id})">${visitedRestaurants.has(item.id) ? 'å‰Šé™¤' : 'è¡Œã£ãŸ'}</button>
                </td>
            `;
            return row;
        }

        // é‡‘é¡ãƒ©ãƒ™ãƒ«å–å¾—
        function getPriceLabel(priceRange) {
            const labels = {
                '~5000': 'ã€œ5,000å††',
                '5000-10000': '5,000ã€œ10,000å††',
                '10000+': '10,000å††ã€œ'
            };
            return labels[priceRange] || priceRange;
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
        function applyFilters() {
            const cuisineFilter = document.getElementById('cuisineFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;
            const volumeFilter = document.getElementById('volumeFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();

            filteredData = restaurantData.filter(item => {
                if (cuisineFilter && item.category !== cuisineFilter) return false;
                if (priceFilter && item.priceRange !== priceFilter) return false;
                if (volumeFilter && item.volume !== volumeFilter) return false;

                if (searchText) {
                    const searchableText = `${item.name} ${item.subcategory} ${item.tags.join(' ')} ${item.memo}`.toLowerCase();
                    if (!searchableText.includes(searchText)) return false;
                }

                return true;
            });

            renderView();
            updateStats();
        }

        // è¨ªå•ãƒãƒ¼ã‚¯
        function markAsVisited(id) {
            if (visitedRestaurants.has(id)) {
                visitedRestaurants.delete(id);
            } else {
                visitedRestaurants.add(id);
            }
            renderView();
            updateStats();
        }

        // çµ±è¨ˆæƒ…å ±æ›´æ–°
        function updateStats() {
            // ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ãŸãŸã‚ã€ã“ã®é–¢æ•°ã¯ç©ºã«ã™ã‚‹
        }

        // è©³ç´°è¡¨ç¤º
        function showDetail(id) {
            const item = restaurantData.find(item => item.id === id);
            if (!item) return;

            document.getElementById('modalTitle').textContent = item.name;
            document.getElementById('modalBody').innerHTML = `
                <div class="detail-grid">
                    <div class="detail-section">
                        <h3>åŸºæœ¬æƒ…å ±</h3>
                        <div class="info-item">
                            <div class="info-label">ã‚¸ãƒ£ãƒ³ãƒ«</div>
                            <div class="info-value">${item.category} > ${item.subcategory}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ä½æ‰€</div>
                            <div class="info-value">${item.address}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é›»è©±ç•ªå·</div>
                            <div class="info-value">${item.phone}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">å–¶æ¥­æ™‚é–“</div>
                            <div class="info-value">${item.hours}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">å®šä¼‘æ—¥</div>
                            <div class="info-value">${item.closed}</div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>ã‚¢ã‚¯ã‚»ã‚¹ãƒ»äºˆç´„</h3>
                        <div class="info-item">
                            <div class="info-label">ã‚¢ã‚¯ã‚»ã‚¹</div>
                            <div class="info-value">${item.access}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é§è»Šå ´</div>
                            <div class="info-value">${item.parking}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é‡‘é¡å¸¯</div>
                            <div class="info-value">${getPriceLabel(item.priceRange)}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é ¼ã¿æ–¹</div>
                            <div class="info-value">${item.orderStyle}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</div>
                            <div class="info-value">
                                ${item.website ? `<a href="${item.website}" target="_blank" style="color: #DAA520; text-decoration: none;">ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹</a>` : 'æƒ…å ±ãªã—'}
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Instagram</div>
                            <div class="info-value">
                                ${item.instagram ? `<a href="${item.instagram}" target="_blank" style="color: #DAA520; text-decoration: none;">@ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¦‹ã‚‹</a>` : 'æƒ…å ±ãªã—'}
                            </div>
                        </div>
                        ${item.article ? `
                        <div class="info-item">
                            <div class="info-label">ãŠã™ã™ã‚è¨˜äº‹</div>
                            <div class="info-value">
                                <a href="${item.article}" target="_blank" style="color: #DAA520; text-decoration: none;">Madame Figaroè¨˜äº‹</a>
                            </div>
                        </div>
                        ` : ''}
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="makeReservation(${item.id})">äºˆç´„ãƒ»ãŠå•ã„åˆã‚ã›</button>
                            <button class="btn btn-secondary" onclick="showOnMap(${item.id})" style="margin-left: 10px;">Google Mapã§è¦‹ã‚‹</button>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>å®¶è€ã®ãƒ¡ãƒ¢</h3>
                        <p>${item.memo}</p>
                        <div class="tags" style="margin-top: 16px;">
                            ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>å†™çœŸãƒ»è¨˜éŒ²</h3>
                        <button class="btn btn-secondary" onclick="openPhotoModal(${item.id})" style="margin-bottom: 16px;">å†™çœŸã‚’æŠ•ç¨¿</button>
                        <div class="photos-grid">
                            ${item.photos.length > 0 ? 
                                item.photos.map(photo => `<div class="photo-item">${photo}</div>`).join('') :
                                '<div class="photo-item">å†™çœŸãŒã¾ã ã‚ã‚Šã¾ã›ã‚“</div>'
                            }
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('detailModal').style.display = 'block';
        }

        // äºˆç´„ã‚·ã‚¹ãƒ†ãƒ 
        function makeReservation(id) {
            const item = restaurantData.find(item => item.id === id);
            if (!item) return;

            // é›»è©±ç•ªå·ã‚„äºˆç´„å°‚ç”¨LINEã«é·ç§»
            if (item.phone && item.phone !== '') {
                window.open(`tel:${item.phone}`, '_self');
            } else {
                alert('ãŠé›»è©±ã§ã®ã”äºˆç´„ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚');
            }
        }

        // å†™çœŸæŠ•ç¨¿ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openPhotoModal(restaurantId) {
            window.currentRestaurantId = restaurantId;
            document.getElementById('photoModal').style.display = 'block';
        }

        function closePhotoModal() {
            document.getElementById('photoModal').style.display = 'none';
        }

        function uploadPhoto() {
            document.getElementById('photoInput').click();
        }

        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
            const photoData = {
                id: uploadedPhotos.length + 1,
                restaurantId: window.currentRestaurantId,
                filename: file.name,
                timestamp: new Date()
            };

            uploadedPhotos.push(photoData);
            
            // è©²å½“ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å†™çœŸé…åˆ—ã«è¿½åŠ 
            const restaurant = restaurantData.find(r => r.id === window.currentRestaurantId);
            if (restaurant) {
                restaurant.photos.push(`ğŸ“¸ ${file.name}`);
            }

            updateStats();
            closePhotoModal();
            alert('å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // CSVå‡ºåŠ›
        function exportVisited() {
            if (visitedRestaurants.size === 0) {
                alert('ã¾ã è¡Œã£ãŸåº—ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
                return;
            }

            const visitedData = restaurantData.filter(item => visitedRestaurants.has(item.id));
            const csvContent = convertToCSV(visitedData);
            downloadCSV(csvContent, 'è¡Œã£ãŸåº—ãƒªã‚¹ãƒˆ.csv');
        }

        // CSVå¤‰æ›
        function convertToCSV(data) {
            const headers = [
                'åº—å', 'ã‚¸ãƒ£ãƒ³ãƒ«', 'ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒª', 'ä½æ‰€', 'é‡‘é¡å¸¯', 'é‡', 'é ¼ã¿æ–¹',
                'ã‚¢ã‚¯ã‚»ã‚¹', 'å–¶æ¥­æ™‚é–“', 'å®šä¼‘æ—¥', 'é§è»Šå ´', 'é›»è©±ç•ªå·', 'ãƒ¡ãƒ¢'
            ];

            const rows = data.map(item => [
                item.name,
                item.category,
                item.subcategory,
                item.address,
                getPriceLabel(item.priceRange),
                item.volume,
                item.orderStyle,
                item.access,
                item.hours,
                item.closed,
                item.parking,
                item.phone,
                item.memo
            ]);

            return [headers, ...rows].map(row => 
                row.map(field => `"${field}"`).join(',')
            ).join('\n');
        }

        // CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadCSV(content, filename) {
            const blob = new Blob(['\uFEFF' + content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // è¨˜éŒ²ã‚¯ãƒªã‚¢
        function clearVisited() {
            if (confirm('è¡Œã£ãŸåº—ã®è¨˜éŒ²ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
                visitedRestaurants.clear();
                renderView();
                updateStats();
            }
        }

        // è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function setView(viewType) {
            const galleryBtn = document.getElementById('galleryBtn');
            const listBtn = document.getElementById('listBtn');
            
            galleryBtn.classList.remove('active');
            listBtn.classList.remove('active');
            
            if (viewType === 'gallery') {
                galleryBtn.classList.add('active');
                currentView = 'gallery';
            } else {
                listBtn.classList.add('active');
                currentView = 'list';
            }
            
            renderView();
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', init);

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.addEventListener('click', function(event) {
            const detailModal = document.getElementById('detailModal');
            const photoModal = document.getElementById('photoModal');
            
            if (event.target === detailModal) {
                closeModal();
            }
            if (event.target === photoModal) {
                closePhotoModal();
            }
        });
    </script>
</body>
</html>
