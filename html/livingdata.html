<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚µã‚¤ãƒˆ - æ’­å·ä¸ŠåŸç”°</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #f8f9f1 0%, #e8e9e0 100%);
            min-height: 100vh;
            color: #2c3e31;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.8);
            padding: 60px 40px;
            border-radius: 24px;
            text-align: center;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .header h1 {
            font-size: 3rem;
            color: #2c3e31;
            margin-bottom: 16px;
            font-weight: 300;
            letter-spacing: 0.02em;
        }

        .header p {
            color: #6b7d6f;
            font-size: 1.1rem;
            margin-bottom: 32px;
            font-weight: 400;
        }

        .map-container {
            width: 100%;
            height: 300px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(44, 62, 49, 0.1);
            margin-top: 20px;
        }

        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .analytics-section {
            background: rgba(255, 255, 255, 0.8);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .analytics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .analytics-header h2 {
            font-size: 1.5rem;
            color: #2c3e31;
            font-weight: 400;
        }

        .chart-toggle {
            display: flex;
            background: #f0f2ec;
            border-radius: 12px;
            padding: 4px;
            gap: 4px;
        }

        .chart-toggle button {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: #6b7d6f;
            font-weight: 400;
        }

        .chart-toggle button.active {
            background: #a4b89a;
            color: white;
            box-shadow: 0 2px 8px rgba(164, 184, 154, 0.3);
        }

        .area-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 20px;
        }

        .feature-card {
            background: linear-gradient(135deg, #fafbf9, #f0f2ec);
            padding: 32px 24px;
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(164, 184, 154, 0.2);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(164, 184, 154, 0.15);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .feature-card h3 {
            font-size: 1.2rem;
            color: #2c3e31;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .feature-card p {
            color: #6b7d6f;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .chart-container {
            background: #fafbf9;
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(164, 184, 154, 0.2);
        }

        .chart-canvas {
            max-height: 280px;
        }

        .controls {
            background: rgba(255, 255, 255, 0.8);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            font-weight: 500;
            margin-bottom: 12px;
            color: #2c3e31;
            font-size: 0.95rem;
        }

        .filter-group select,
        .filter-group input {
            padding: 16px 20px;
            border: 2px solid #e8eae2;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafbf9;
            color: #2c3e31;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #a4b89a;
            box-shadow: 0 0 0 4px rgba(164, 184, 154, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            align-items: center;
        }

        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-family: inherit;
        }

        .btn-primary {
            background: #a4b89a;
            color: white;
            box-shadow: 0 4px 16px rgba(164, 184, 154, 0.3);
        }

        .btn-primary:hover {
            background: #8fa285;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(164, 184, 154, 0.4);
        }

        .btn-secondary {
            background: #f0f2ec;
            color: #6b7d6f;
            border: 2px solid #e8eae2;
        }

        .btn-secondary:hover {
            background: #e8eae2;
            transform: translateY(-2px);
        }

        .view-toggle {
            display: flex;
            background: #f0f2ec;
            border-radius: 12px;
            padding: 4px;
            gap: 4px;
        }

        .view-toggle button {
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            color: #6b7d6f;
            font-weight: 400;
        }

        .view-toggle button.active {
            background: #a4b89a;
            color: white;
            box-shadow: 0 2px 8px rgba(164, 184, 154, 0.3);
        }

        .stats {
            background: rgba(255, 255, 255, 0.8);
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 32px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fafbf9, #f0f2ec);
            border-radius: 16px;
            border: 1px solid rgba(164, 184, 154, 0.2);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 300;
            color: #a4b89a;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #6b7d6f;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 32px;
        }

        .list-view {
            display: none;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            overflow: hidden;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .list-view table {
            width: 100%;
            border-collapse: collapse;
        }

        .list-view th,
        .list-view td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid #e8eae2;
        }

        .list-view th {
            background: #f0f2ec;
            font-weight: 500;
            color: #2c3e31;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 40px rgba(44, 62, 49, 0.08);
            transition: all 0.4s ease;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.9);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 60px rgba(44, 62, 49, 0.12);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 500;
            color: #2c3e31;
            margin-bottom: 8px;
            letter-spacing: 0.01em;
        }

        .card-address {
            color: #6b7d6f;
            font-size: 0.9rem;
            font-weight: 400;
        }

        .card-type {
            background: linear-gradient(135deg, #a4b89a, #8fa285);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(164, 184, 154, 0.3);
        }

        .card-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 28px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 0.85rem;
            color: #6b7d6f;
            font-weight: 400;
        }

        .info-value {
            font-weight: 500;
            color: #2c3e31;
            font-size: 0.95rem;
        }

        .card-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e8eae2;
        }

        .btn-small {
            padding: 12px 24px;
            font-size: 0.9rem;
        }

        .checkbox {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 20px;
            height: 20px;
            accent-color: #a4b89a;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 49, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 80px rgba(44, 62, 49, 0.15);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e8eae2;
        }

        .modal-header h2 {
            font-size: 1.6rem;
            color: #2c3e31;
            font-weight: 500;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: #6b7d6f;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #2c3e31;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }

        .detail-section {
            background: #fafbf9;
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(164, 184, 154, 0.2);
        }

        .detail-section h3 {
            color: #2c3e31;
            margin-bottom: 20px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .detail-section .info-item {
            margin-bottom: 16px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .header {
                padding: 40px 24px;
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
            
            .search-filters {
                grid-template-columns: 1fr;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            .card-info {
                grid-template-columns: 1fr;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚µã‚¤ãƒˆ</h1>
            <p>å§«è·¯å¸‚è¡—åœ°ã¨è±Šã‹ãªè‡ªç„¶ã‚’ã¤ãªãä¸ŠåŸç”°ã‚¨ãƒªã‚¢ - é“ã®é§…ã‚’æ ¸ã¨ã—ãŸæŒç¶šå¯èƒ½ãªã¾ã¡ã¥ãã‚Š</p>
            
            <!-- Google MapåŸ‹ã‚è¾¼ã¿ - ä¸ŠåŸç”°äº¤å·®ç‚¹ -->
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6567.5!2d134.736366!3d34.835389!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x355327d1f2a3b4c5%3A0x12345678901abcde!2z5LiK5Y6f55Sw5Lqk5beu54K55LiJ6YGp54K5!5e0!3m2!1sja!2sjp!4v1635123456789!5m2!1sja!2sjp"
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>

        <!-- ã‚¨ãƒªã‚¢ç‰¹æ€§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="analytics-section">
            <div class="analytics-header">
                <h2>ã‚¨ãƒªã‚¢ç‰¹æ€§</h2>
            </div>
            
            <div class="area-features">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ›£ï¸</div>
                    <h3>äº¤é€šã‚¢ã‚¯ã‚»ã‚¹æ‹ ç‚¹</h3>
                    <p>èŠ±ç”°ICã¾ã§è»Šã§3åˆ†ã€‚æ’­ä½†é€£çµ¡é“è·¯çµŒç”±ã§é–¢è¥¿åœã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæŠœç¾¤ã€‚å§«è·¯ä¸­å¿ƒéƒ¨ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„ã«æ±è¥¿å—åŒ—ã¸ç§»å‹•å¯èƒ½ã€‚</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸï¸</div>
                    <h3>éƒ½å¸‚ã¨è‡ªç„¶ã®å¢ƒç•Œ</h3>
                    <p>å§«è·¯å¸‚è¡—åœ°ã‹ã‚‰ç´„4kmã€‚è¥¿ã¯å¸‚è¡—åœ°ã€æ±ã¯è±Šã‹ãªè‡ªç„¶ã¨è¾²åœ°ã‚¨ãƒªã‚¢ã€‚éƒ½å¸‚æ©Ÿèƒ½ã¨è‡ªç„¶ç’°å¢ƒã®ä¸¡æ–¹ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªç«‹åœ°ã€‚</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸª</div>
                    <h3>é“ã®é§…é–‹ç™ºäºˆå®š</h3>
                    <p>2025å¹´7æœˆå…¬å‹Ÿé–‹å§‹äºˆå®šã€‚å§«è·¯å¸‚åˆã®é“ã®é§…ã¨ã—ã¦åœ°åŸŸã®æ–°ãŸãªæ ¸ã¨ãªã‚‹å¯èƒ½æ€§ã€‚è¦³å…‰ã¨åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ãŒæœŸå¾…ã•ã‚Œã‚‹ã€‚</p>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalSpots">6</div>
                    <div class="stat-label">ç·ã‚¹ãƒãƒƒãƒˆæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="storeCount">5</div>
                    <div class="stat-label">åº—èˆ—</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="vacantCount">3</div>
                    <div class="stat-label">é–‹ç™ºç”¨åœ°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="selectedCount">0</div>
                    <div class="stat-label">é¸æŠä¸­</div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="search-filters">
                <div class="filter-group">
                    <label for="typeFilter">ç¨®åˆ¥</label>
                    <select id="typeFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="store">åº—èˆ—</option>
                        <option value="vacant">ç©ºãåœ°</option>
                        <option value="residential">ä½å®…</option>
                        <option value="agriculture">è¾²åœ°</option>
                        <option value="development">é–‹ç™ºäºˆå®š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="areaFilter">é¢ç©ï¼ˆmÂ²ï¼‰</label>
                    <select id="areaFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="0-1000">1,000mÂ²æœªæº€</option>
                        <option value="1000-5000">1,000-5,000mÂ²</option>
                        <option value="5000+">5,000mÂ²ä»¥ä¸Š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="distanceFilter">å§«è·¯é§…ã‹ã‚‰ã®è·é›¢</label>
                    <select id="distanceFilter">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="0-15">15åˆ†ä»¥å†…</option>
                        <option value="15-30">15-30åˆ†</option>
                        <option value="30+">30åˆ†ä»¥ä¸Š</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="searchInput">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</label>
                    <input type="text" id="searchInput" placeholder="æ–½è¨­åã€ä½æ‰€ã§æ¤œç´¢">
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="exportSelected()">é¸æŠé …ç›®ã‚’CSVå‡ºåŠ›</button>
                <button class="btn btn-secondary" onclick="clearSelection()">é¸æŠè§£é™¤</button>
                <div class="view-toggle">
                    <button class="active" id="galleryBtn" onclick="setView('gallery')">ã‚®ãƒ£ãƒ©ãƒªãƒ¼</button>
                    <button id="listBtn" onclick="setView('list')">ãƒªã‚¹ãƒˆ</button>
                </div>
            </div>
        </div>

        <div class="gallery" id="gallery">
            <!-- ã‚«ãƒ¼ãƒ‰ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
        </div>

        <!-- ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ -->
        <div class="list-view" id="listView">
            <table>
                <thead>
                    <tr>
                        <th>é¸æŠ</th>
                        <th>åç§°</th>
                        <th>ç¨®åˆ¥</th>
                        <th>é¢ç©</th>
                        <th>å§«è·¯é§…ã¾ã§</th>
                        <th>çŠ¶æ…‹</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="listTableBody">
                    <!-- ãƒ‡ãƒ¼ã‚¿ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">è©³ç´°æƒ…å ±</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody">
                <!-- è©³ç´°æƒ…å ±ã¯JavaScriptã§å‹•çš„ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ - å®Ÿéš›ã®ã‚¹ãƒãƒƒãƒˆæƒ…å ±ã«æ›´æ–°
        const locationData = [
            {
                id: 1,
                name: "ã‚»ãƒ–ãƒ³ã‚¤ãƒ¬ãƒ–ãƒ³å§«è·¯ä¸ŠåŸç”°åº—",
                type: "store",
                category: "ã‚³ãƒ³ãƒ“ãƒ‹ã‚¨ãƒ³ã‚¹ã‚¹ãƒˆã‚¢",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°",
                area: 600,
                zoning: "å•†æ¥­åœ°åŸŸ",
                status: "å–¶æ¥­ä¸­",
                revenue: "é«˜",
                coordinates: { lat: 34.823456, lng: 134.623456 },
                googleMapsUrl: "https://maps.app.goo.gl/8Vp2631oNY4gL2j47",
                accessibility: {
                    himejiStation: 15,
                    hanedaIC: 2,
                    sanyoHimejiIC: 8,
                    kobe: 45,
                    osaka: 65,
                    kyoto: 90
                },
                infrastructure: {
                    roadType: "çœŒé“",
                    roadWidth: "ç‰‡å´ä¸€è»Šç·š",
                    traffic: { morning: "ä¸­", noon: "ä½", evening: "é«˜" },
                    water: "æ•´å‚™æ¸ˆã¿",
                    electricity: "æ•´å‚™æ¸ˆã¿",
                    gas: "æ•´å‚™æ¸ˆã¿",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œ"
                }
            },
            {
                id: 2,
                name: "è¥¿æ¾å±‹ èŠ±ç”°åº—",
                type: "store",
                category: "å­ä¾›ç”¨å“åº—",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°",
                area: 1200,
                zoning: "å•†æ¥­åœ°åŸŸ",
                status: "å–¶æ¥­ä¸­",
                revenue: "ä¸­",
                coordinates: { lat: 34.823356, lng: 134.623356 },
                googleMapsUrl: "https://maps.app.goo.gl/PitdUhCmTTCYjQBC7",
                accessibility: {
                    himejiStation: 16,
                    hanedaIC: 3,
                    sanyoHimejiIC: 9,
                    kobe: 46,
                    osaka: 66,
                    kyoto: 91
                },
                infrastructure: {
                    roadType: "çœŒé“",
                    roadWidth: "ç‰‡å´ä¸€è»Šç·š",
                    traffic: { morning: "ä¸­", noon: "ä¸­", evening: "é«˜" },
                    water: "æ•´å‚™æ¸ˆã¿",
                    electricity: "æ•´å‚™æ¸ˆã¿",
                    gas: "æ•´å‚™æ¸ˆã¿",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œ"
                }
            },
            {
                id: 3,
                name: "ãƒ©ãƒ»ãƒ ãƒ¼",
                type: "store",
                category: "ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ¼ã‚±ãƒƒãƒˆ",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°",
                area: 1800,
                zoning: "å•†æ¥­åœ°åŸŸ",
                status: "å–¶æ¥­ä¸­",
                revenue: "é«˜",
                coordinates: { lat: 34.823256, lng: 134.623256 },
                googleMapsUrl: "https://maps.app.goo.gl/5J75h49UHn7a9buW6",
                accessibility: {
                    himejiStation: 17,
                    hanedaIC: 4,
                    sanyoHimejiIC: 10,
                    kobe: 47,
                    osaka: 67,
                    kyoto: 92
                },
                infrastructure: {
                    roadType: "çœŒé“",
                    roadWidth: "ç‰‡å´ä¸€è»Šç·š",
                    traffic: { morning: "é«˜", noon: "ä¸­", evening: "é«˜" },
                    water: "æ•´å‚™æ¸ˆã¿",
                    electricity: "æ•´å‚™æ¸ˆã¿",
                    gas: "æ•´å‚™æ¸ˆã¿",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œ"
                }
            },
            {
                id: 4,
                name: "ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰èŠ±ç”°ãƒ•ãƒ¬ãƒƒãƒ„ã‚¬ãƒ¼ãƒ‡ãƒ³åº—",
                type: "store",
                category: "é£²é£Ÿåº—",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°",
                area: 800,
                zoning: "å•†æ¥­åœ°åŸŸ",
                status: "å–¶æ¥­ä¸­",
                revenue: "é«˜",
                coordinates: { lat: 34.823156, lng: 134.623156 },
                googleMapsUrl: "https://maps.app.goo.gl/2HnVvRdxnoRxsVhz6",
                accessibility: {
                    himejiStation: 18,
                    hanedaIC: 5,
                    sanyoHimejiIC: 11,
                    kobe: 48,
                    osaka: 68,
                    kyoto: 93
                },
                infrastructure: {
                    roadType: "çœŒé“",
                    roadWidth: "ç‰‡å´ä¸€è»Šç·š",
                    traffic: { morning: "ä¸­", noon: "é«˜", evening: "é«˜" },
                    water: "æ•´å‚™æ¸ˆã¿",
                    electricity: "æ•´å‚™æ¸ˆã¿",
                    gas: "æ•´å‚™æ¸ˆã¿",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œ"
                }
            },
            {
                id: 5,
                name: "ãƒ¤ãƒãƒ€ãƒ‡ãƒ³ã‚­ ãƒ†ãƒƒã‚¯ãƒ©ãƒ³ãƒ‰å§«è·¯åº—",
                type: "store",
                category: "å®¶é›»é‡è²©åº—",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°",
                area: 2800,
                zoning: "å•†æ¥­åœ°åŸŸ",
                status: "å–¶æ¥­ä¸­",
                revenue: "é«˜",
                coordinates: { lat: 34.823056, lng: 134.623056 },
                googleMapsUrl: "https://maps.app.goo.gl/3vhSckBMswNYsnZ78",
                accessibility: {
                    himejiStation: 18,
                    hanedaIC: 5,
                    sanyoHimejiIC: 12,
                    kobe: 48,
                    osaka: 68,
                    kyoto: 93
                },
                infrastructure: {
                    roadType: "çœŒé“",
                    roadWidth: "ç‰‡å´ä¸€è»Šç·š",
                    traffic: { morning: "ä¸­", noon: "ä¸­", evening: "é«˜" },
                    water: "æ•´å‚™æ¸ˆã¿",
                    electricity: "æ•´å‚™æ¸ˆã¿",
                    gas: "æ•´å‚™æ¸ˆã¿",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œ"
                }
            },
            {
                id: 6,
                name: "é“ã®é§…ï¼ˆå€™è£œåœ°ï¼‰",
                type: "development",
                category: "å…¬å…±æ–½è¨­é–‹ç™ºäºˆå®š",
                address: "å…µåº«çœŒå§«è·¯å¸‚èŠ±ç”°ç”ºä¸ŠåŸç”°ï¼ˆèŠ±ç”°ICæ±å´ï¼‰",
                area: 15000,
                zoning: "å¸‚è¡—åŒ–èª¿æ•´åŒºåŸŸ",
                status: "2025å¹´7æœˆå…¬å‹Ÿäºˆå®š",
                revenue: "è¨ˆç”»ä¸­",
                coordinates: { lat: 34.822956, lng: 134.622956 },
                googleMapsUrl: "",
                accessibility: {
                    himejiStation: 16,
                    hanedaIC: 1,
                    sanyoHimejiIC: 8,
                    kobe: 45,
                    osaka: 65,
                    kyoto: 90
                },
                infrastructure: {
                    roadType: "å›½é“ãƒ»çœŒé“æ¥ç¶š",
                    roadWidth: "ç‰‡å´äºŒè»Šç·šäºˆå®š",
                    traffic: { morning: "äºˆæ¸¬é«˜", noon: "äºˆæ¸¬ä¸­", evening: "äºˆæ¸¬é«˜" },
                    water: "æ•´å‚™äºˆå®š",
                    electricity: "æ•´å‚™äºˆå®š",
                    gas: "æ•´å‚™äºˆå®š",
                    internet: "å…‰ãƒ•ã‚¡ã‚¤ãƒãƒ¼å¯¾å¿œäºˆå®š"
                }
            }
        ];

        let filteredData = [...locationData];
        let selectedItems = new Set();
        let currentView = 'gallery';
        let charts = {};

        // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–
        function init() {
            renderView();
            setupEventListeners();
            initCharts();
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            document.getElementById('typeFilter').addEventListener('change', applyFilters);
            document.getElementById('areaFilter').addEventListener('change', applyFilters);
            document.getElementById('distanceFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
        }

        // ãƒãƒ£ãƒ¼ãƒˆåˆæœŸåŒ–
        function initCharts() {
            // ãƒãƒ£ãƒ¼ãƒˆæ©Ÿèƒ½ã¯å‰Šé™¤æ¸ˆã¿
        }

        // é–‹ç™ºãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰

        // ç¨®åˆ¥åˆ†å¸ƒãƒ‡ãƒ¼ã‚¿å–å¾—
        function getTypeDistribution() {
            const types = {};
            locationData.forEach(item => {
                const typeLabel = getTypeLabel(item.type);
                types[typeLabel] = (types[typeLabel] || 0) + 1;
            });
            return {
                labels: Object.keys(types),
                values: Object.values(types)
            };
        }

        // ç¨®åˆ¥ãƒ©ãƒ™ãƒ«å–å¾—
        function getTypeLabel(type) {
            const labels = {
                store: 'åº—èˆ—',
                vacant: 'ç©ºãåœ°',
                residential: 'ä½å®…',
                agriculture: 'è¾²åœ°',
                development: 'é–‹ç™ºäºˆå®š'
            };
            return labels[type] || type;
        }

        // ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function renderView() {
            if (currentView === 'gallery') {
                renderGallery();
            } else {
                renderList();
            }
            updateStats();
        }

        // ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¡¨ç¤º
        function renderGallery() {
            const gallery = document.getElementById('gallery');
            gallery.style.display = 'grid';
            document.getElementById('listView').style.display = 'none';
            
            gallery.innerHTML = '';
            filteredData.forEach(item => {
                const card = createCard(item);
                gallery.appendChild(card);
            });
        }

        // ãƒªã‚¹ãƒˆè¡¨ç¤º
        function renderList() {
            document.getElementById('gallery').style.display = 'none';
            const listView = document.getElementById('listView');
            listView.style.display = 'block';
            
            const tbody = document.getElementById('listTableBody');
            tbody.innerHTML = '';
            
            filteredData.forEach(item => {
                const row = createListRow(item);
                tbody.appendChild(row);
            });
        }

        // ã‚«ãƒ¼ãƒ‰ä½œæˆ
        function createCard(item) {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <input type="checkbox" class="checkbox" onchange="toggleSelection(${item.id})" ${selectedItems.has(item.id) ? 'checked' : ''}>
                <div class="card-header">
                    <div>
                        <div class="card-title">${item.name}</div>
                        <div class="card-address">${item.address}</div>
                    </div>
                    <div class="card-type">${item.category}</div>
                </div>
                <div class="card-info">
                    <div class="info-item">
                        <div class="info-label">é¢ç©</div>
                        <div class="info-value">${item.area.toLocaleString()}mÂ²</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">åŒºåˆ†</div>
                        <div class="info-value">${item.zoning}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">å§«è·¯é§…ã¾ã§</div>
                        <div class="info-value">è»Šã§${item.accessibility.himejiStation}åˆ†</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">çŠ¶æ…‹</div>
                        <div class="info-value">${item.status}</div>
                    </div>
                </div>
                <div class="card-actions">
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">è©³ç´°ã‚’è¦‹ã‚‹</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">åœ°å›³ã§è¦‹ã‚‹</button>
                </div>
            `;
            return card;
        }

        // ãƒªã‚¹ãƒˆè¡Œä½œæˆ
        function createListRow(item) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="checkbox" onchange="toggleSelection(${item.id})" ${selectedItems.has(item.id) ? 'checked' : ''}></td>
                <td>${item.name}</td>
                <td>${getTypeLabel(item.type)}</td>
                <td>${item.area.toLocaleString()}mÂ²</td>
                <td>è»Šã§${item.accessibility.himejiStation}åˆ†</td>
                <td>${item.status}</td>
                <td>
                    <button class="btn btn-primary btn-small" onclick="showDetail(${item.id})">è©³ç´°</button>
                    <button class="btn btn-secondary btn-small" onclick="showOnMap(${item.id})">åœ°å›³</button>
                </td>
            `;
            return row;
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
        function applyFilters() {
            const typeFilter = document.getElementById('typeFilter').value;
            const areaFilter = document.getElementById('areaFilter').value;
            const distanceFilter = document.getElementById('distanceFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();

            filteredData = locationData.filter(item => {
                if (typeFilter && item.type !== typeFilter) return false;

                if (areaFilter) {
                    const [min, max] = areaFilter.split('-').map(v => v === '+' ? Infinity : parseInt(v) || 0);
                    if (item.area < min || (max !== Infinity && item.area >= max)) return false;
                }

                if (distanceFilter) {
                    const [min, max] = distanceFilter.split('-').map(v => v === '+' ? Infinity : parseInt(v) || 0);
                    if (item.accessibility.himejiStation < min || 
                        (max !== Infinity && item.accessibility.himejiStation >= max)) return false;
                }

                if (searchText) {
                    const searchableText = `${item.name} ${item.address} ${item.category}`.toLowerCase();
                    if (!searchableText.includes(searchText)) return false;
                }

                return true;
            });

            renderView();
        }

        // ã‚¢ã‚¤ãƒ†ãƒ é¸æŠåˆ‡ã‚Šæ›¿ãˆ
        function toggleSelection(id) {
            if (selectedItems.has(id)) {
                selectedItems.delete(id);
            } else {
                selectedItems.add(id);
            }
            updateStats();
        }

        // çµ±è¨ˆæƒ…å ±æ›´æ–°
        function updateStats() {
            document.getElementById('totalSpots').textContent = filteredData.length;
            document.getElementById('storeCount').textContent = filteredData.filter(item => item.type === 'store').length;
            document.getElementById('vacantCount').textContent = filteredData.filter(item => item.type === 'vacant' || item.type === 'development').length;
            document.getElementById('selectedCount').textContent = selectedItems.size;
        }

        // è©³ç´°è¡¨ç¤º
        function showDetail(id) {
            const item = locationData.find(item => item.id === id);
            if (!item) return;

            document.getElementById('modalTitle').textContent = item.name;
            document.getElementById('modalBody').innerHTML = `
                <div class="detail-grid">
                    <div class="detail-section">
                        <h3>åŸºæœ¬æƒ…å ±</h3>
                        <div class="info-item">
                            <div class="info-label">ç¨®åˆ¥</div>
                            <div class="info-value">${item.category}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ä½æ‰€</div>
                            <div class="info-value">${item.address}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é¢ç©</div>
                            <div class="info-value">${item.area.toLocaleString()}mÂ²</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">åŒºåˆ†</div>
                            <div class="info-value">${item.zoning}</div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>ã‚¢ã‚¯ã‚»ã‚¹ãƒ»äº¤é€š</h3>
                        <div class="info-item">
                            <div class="info-label">JRå§«è·¯é§…ã¾ã§</div>
                            <div class="info-value">è»Šã§${item.accessibility.himejiStation}åˆ†</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">èŠ±ç”°ICã¾ã§</div>
                            <div class="info-value">è»Šã§${item.accessibility.hanedaIC}åˆ†</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">å±±é™½å§«è·¯ICã¾ã§</div>
                            <div class="info-value">è»Šã§${item.accessibility.sanyoHimejiIC}åˆ†</div>
                        </div>
                        ${item.accessibility.kobe ? `
                        <div class="info-item">
                            <div class="info-label">ç¥æˆ¸ã¾ã§</div>
                            <div class="info-value">è»Šã§${item.accessibility.kobe}åˆ†</div>
                        </div>
                        ` : ''}
                        ${item.accessibility.osaka ? `
                        <div class="info-item">
                            <div class="info-label">å¤§é˜ªã¾ã§</div>
                            <div class="info-value">è»Šã§${item.accessibility.osaka}åˆ†</div>
                        </div>
                        ` : ''}
                    </div>
                    <div class="detail-section">
                        <h3>é“è·¯ãƒ»äº¤é€šçŠ¶æ³</h3>
                        ${item.infrastructure.roadType ? `
                        <div class="info-item">
                            <div class="info-label">é“è·¯åŒºåˆ†</div>
                            <div class="info-value">${item.infrastructure.roadType}</div>
                        </div>
                        ` : ''}
                        ${item.infrastructure.roadWidth ? `
                        <div class="info-item">
                            <div class="info-label">é“è·¯å¹…</div>
                            <div class="info-value">${item.infrastructure.roadWidth}</div>
                        </div>
                        ` : ''}
                        ${item.infrastructure.traffic ? `
                        <div class="info-item">
                            <div class="info-label">äº¤é€šé‡ï¼ˆæœ/æ˜¼/å¤œï¼‰</div>
                            <div class="info-value">${item.infrastructure.traffic.morning}/${item.infrastructure.traffic.noon}/${item.infrastructure.traffic.evening}</div>
                        </div>
                        ` : ''}
                    </div>
                    <div class="detail-section">
                        <h3>ã‚¤ãƒ³ãƒ•ãƒ©</h3>
                        <div class="info-item">
                            <div class="info-label">ä¸Šä¸‹æ°´é“</div>
                            <div class="info-value">${item.infrastructure.water}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é›»åŠ›</div>
                            <div class="info-value">${item.infrastructure.electricity}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">ã‚¬ã‚¹</div>
                            <div class="info-value">${item.infrastructure.gas}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">é€šä¿¡</div>
                            <div class="info-value">${item.infrastructure.internet}</div>
                        </div>
                    </div>
                    <div class="detail-section">
                        <h3>é‹å–¶çŠ¶æ³</h3>
                        <div class="info-item">
                            <div class="info-label">çŠ¶æ…‹</div>
                            <div class="info-value">${item.status}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">åç›Šæ€§</div>
                            <div class="info-value">${item.revenue}</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('detailModal').style.display = 'block';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        // åœ°å›³ã§è¡¨ç¤º
        function showOnMap(id) {
            const item = locationData.find(item => item.id === id);
            if (!item) return;
            
            // Google Mapsã®æ—¢å­˜URLãŒã‚ã‚‹å ´åˆã¯ãã‚Œã‚’ä½¿ç”¨ã€ãªã‘ã‚Œã°åº§æ¨™ã§è¡¨ç¤º
            let url;
            if (item.googleMapsUrl && item.googleMapsUrl !== "") {
                url = item.googleMapsUrl;
            } else {
                url = `https://www.google.com/maps/search/?api=1&query=${item.coordinates.lat},${item.coordinates.lng}`;
            }
            window.open(url, '_blank');
        }

        // ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆï¼ˆå‰Šé™¤æ¸ˆã¿ï¼‰

        // CSVå‡ºåŠ›
        function exportSelected() {
            if (selectedItems.size === 0) {
                alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            const selectedData = locationData.filter(item => selectedItems.has(item.id));
            const csvContent = convertToCSV(selectedData);
            downloadCSV(csvContent, 'æ’­å·ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿.csv');
        }

        // CSVå¤‰æ›
        function convertToCSV(data) {
            const headers = [
                'åç§°', 'ç¨®åˆ¥', 'ã‚«ãƒ†ã‚´ãƒª', 'ä½æ‰€', 'é¢ç©(mÂ²)', 'åŒºåˆ†', 'çŠ¶æ…‹',
                'å§«è·¯é§…ã¾ã§(åˆ†)', 'èŠ±ç”°ICã¾ã§(åˆ†)', 'å±±é™½å§«è·¯ICã¾ã§(åˆ†)',
                'ä¸Šä¸‹æ°´é“', 'é›»åŠ›', 'ã‚¬ã‚¹', 'é€šä¿¡'
            ];

            const rows = data.map(item => [
                item.name,
                getTypeLabel(item.type),
                item.category,
                item.address,
                item.area,
                item.zoning,
                item.status,
                item.accessibility.himejiStation,
                item.accessibility.hanedaIC,
                item.accessibility.sanyoHimejiIC,
                item.infrastructure.water,
                item.infrastructure.electricity,
                item.infrastructure.gas,
                item.infrastructure.internet
            ]);

            return [headers, ...rows].map(row => 
                row.map(field => `"${field}"`).join(',')
            ).join('\n');
        }

        // CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadCSV(content, filename) {
            const blob = new Blob(['\uFEFF' + content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // é¸æŠè§£é™¤
        function clearSelection() {
            selectedItems.clear();
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(cb => cb.checked = false);
            updateStats();
        }

        // è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function setView(viewType) {
            const galleryBtn = document.getElementById('galleryBtn');
            const listBtn = document.getElementById('listBtn');
            
            galleryBtn.classList.remove('active');
            listBtn.classList.remove('active');
            
            if (viewType === 'gallery') {
                galleryBtn.classList.add('active');
                currentView = 'gallery';
            } else {
                listBtn.classList.add('active');
                currentView = 'list';
            }
            
            renderView();
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', init);

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('detailModal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>
